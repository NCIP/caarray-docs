USER STORY: Parse Illumina BGX/TXT array designs

As a Curator or Data Owner, I want to import an Illumina array design in BGX or TXT format so that the array design can be associated to experiments and data files. The BGX format is just a gzipped version of the TXT format.

1. Flow:

* The user (Curator or Data Owner) chooses to import a new array design.
* The system allows "Illumina Design BGX/TXT" as one of the options for the file type. (This applies to only the gene expression assay type.)
* The user chooses the BGX/TXT format and selects a file in either the BGX or TXT format.
* If the file has the extension .bgx, the system unzips the file into TXT format.
    Otherwise, the system reads the file and tries to parse it assuming it is in the TXT format.
      If it cannot be parsed as a TXT, the systems treats it as a BGX file and tries to unzip it into TXT format.
        If it still cannot be parsed, the System informs the user that the import has failed.
* The system parses the TXT file:
  + The file is divided into 4 sections: [Heading], [Probes], [Controls] and [Columns]. The [Probes] section must be present, otherwise the file is invalid.
  + If the [Heading] section lists the number of probes and the number of controls, validate to make sure that there are that many rows in the [Probes] and [Controls] sections.
  + The [Probes] section should contain a header row that contains a subset of the columns listed in section 2 of this user story.
  + The columns can be in any order, and the only column that is mandatory is the Probe_Id column which is a String.
  + The [Controls] section should contain a header row that contains a subset of the columns listed in section 2 of this user story.
  + The columns can be in any order, and the only column that is mandatory is the Probe_Id column which is a String.
  + For each of the probes parsed from the [Controls] section, we need to be able to designate that design element as a "control". Note that currently, the [Controls] section is ignored. We should parse the probes in the [Controls] section and store them - either as probes with an extra field indicating that they are of type "control", or by putting them into a "Control" ProbeGroup. From the user's point of view, there is no preference for one or the other option, as long as a parsed DataSet retrieved through the programmatic API has the information.
  + Ignore the [Columns] section.
  + The Probe_Id is the crucial column to parse - it is the unique identifier that data values will eventually be mapped to.
  + Sample BGX and TXT array design files are attached.
  + Approximate size of a TXT file: 22136215 bytes (60,000 lines)
    Approximate size of a BGX file: 6291279 bytes 
    Sample BGX and TXT files are in array_designs/

2. The Illumina TXT array design format:

(The fields that need to be parsed are called out - the other fields don't have to be parsed or stored for now.)

Field	Description
Accession	GenBank accession number for the gene            **** ExpressionProbeAnnotation->Gene.genbankAccession
Array_Address_Id	Decoder identifier
Chromosome	Chromosome on which the gene is located
Cytoband	Cytogenetic banding region of the chromosome on which the gene associated with the target is located
Definition	Definition field from the GenBank record         **** ExpressionProbeAnnotation->Gene.fullName
Entrez_Gene_ID	Entrez Gene database identifier for the gene     **** ExpressionProbeAnnotation->Gene.entrezgeneId
GI	GenBank identifier for the gene
ILMN_Gene	Illuminainternal gene symbol
Obsolete_Probe_Id	Probe identifier before BGX annotation files
Ontology_Component	Gene Ontology cellular components associated with the gene
Ontology_Function	Gene Ontology molecular functions associated with the gene
Ontology_Process	Gene Ontology biological processes associated with the gene
Probe_Chr_Orientation	Orientation of the probe on the NCBI genome build
Probe_Coordinates	Genomic position of the probe on the NCBI genome build
Probe_Id	Illuminaprobe identifier                         **** NEW field that needs to be parsed and stored (instead of the old "Target")
Probe_Sequence	Sequence of the probe
Probe_Start	Start position of the probe relative to the 5' end of the source transcript sequence
Probe_Type	Information about what the probe is targeting
Protein_Product	NCBI protein accession number
RefSeq_ID	Identifier from the NCBI RefSeq database
Reporter_Composite_map	Information associated with control probes
Reporter_Group_Name	Information associated with control probes
Reporter_Group_id	Information associated with control probes
Search_Key	Internal identifier for the target, useful for custom design array
Source	Source from which the transcript sequence was obtained
Source_Reference_ID	Source's identifier
Species	Species associated with the gene
Symbol	Typically, the gene symbol                               **** ExpressionProbeAnnotation->Gene.symbol
Synonyms	Synonyms for the gene (from the GenBank record)
Transcript	Illuminainternal transcript identifier
Unigene_ID	Identifier from the NCBI UniGene database        **** ExpressionProbeAnnotation->Gene.unigeneclusterID

3. ... compared to the old Illumina CSV array design format:

Field	Description
Search_key	Internal identifier for the target, useful for custom design array
Target	Unique identifier for the target
ProbeId	Illumina probe identifier
Gid	GenBank identifier for the gene
Transcript	Illumina internal transcript identifier
Accession	GenBank accession number for the gene
Symbol	Typically, the gene symbol
Type	Probe type
Start	Starting position of the probe sequence in the GenBank record
Probe_Sequence	Sequence of the probe
Definition	Definition field from the GenBank record
Ontology	Gene Ontology terms associated with the gene
Synonym	Synonyms for the gene (from the GenBank record)

